偏序集容斥

给定一偏序集，其中某些元素带有非法标记，求不带有非法标记且**全序**的子集数量（可另附加性质）。

例如给定偏序集$( {(1,1),(1,2)...(5,5)},<=)$，其中偏序关系$(x_1,y_1)<=(x_2,y_2)$定义为$x_1<=x_2 \&\&y_1<=y_2$，且非法标记如下表所示，求不带有非法标记且**全序**且子集大小为9的子集数量。

翻译成人话就是：求从$S$只往下或者只往右走，不经过$X$，走到$T$的方案数。

| **S** |  .   | **X** |  .   |   .   |
| :---: | :--: | :---: | :--: | :---: |
|   .   |  .   |   .   |  .   |   .   |
| **X** |  .   | **X** |  .   | **X** |
|   .   |  .   |   .   |  .   |   .   |
|   .   |  .   | **X** |  .   | **T** |

最简单的方法是$O(2^n)$暴力容斥每一组非法标记，但是这样复杂度太大，且有很多冗余。

考虑一种简单的$O(n^2)$容斥法，设$f_{x,y}$为经过$(x,y)$且到$(x,y)$之前不经过$X$的方案数，换而言之，如果$(x,y)$为$X$，则他是路径上经过的第一个$X$。再设$S$为总方案数（即全集），则答案为$S-\sum_{(x,y)带有非法标记}f(x,y)$。

这样我们就可很容易$O(n^2)$跑DP了。

